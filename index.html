<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Kierownik</title>
  </head>
  <body>
    <main
      class="container min-h-screen mx-auto bg-slate-50 px-2 mb-3 overflow-x-scroll"
    >
      <section class="flex flex-row gap-3 py-3">
        <form
          id="generalPlanInfoForm"
          class="basis-2/3 border-2 border-blue-400 rounded-2xl px-3 pb-2"
        >
          <div class="grid grid-col-2 gap-2">
            <div class="p-2 col-span-2 flex justify-center">
              <div
                class="relative group flex w-full justify-center cursor-pointer"
              >
                <div>Informacje ogólne</div>
                <div
                  class="absolute top-full left-1/2 -translate-x-1/2 mt-2 w-80 p-4 bg-slate-200 text-gray-700 rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10"
                >
                  <h3
                    class="flex flex-row justify-center text-md font-semibold mb-2"
                  >
                    Informacje dodatkowe
                  </h3>
                  <p class="text-sm">Nazwa projektu: Batkowo</p>
                  <p class="text-sm mt-1">Dział: Elektryka</p>
                  <p class="text-sm mt-1">
                    Rodzaj robót: Kafarowanie słupów konstrukcji
                  </p>
                  <p class="text-sm mt-1">Start robót: 21 lis 2024</p>
                  <p class="text-sm mt-1">Zakończenie robót: 5 mar 2025</p>
                </div>
              </div>
              <svg
                class="cursor-pointer fill-gray-600"
                onclick="resetGeneralPlanInfoForm()"
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                width="24px"
                viewBox="0 -960 960 960"
              >
                <path
                  d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"
                />
              </svg>
            </div>
            <div class="rounded-lg">
              <select
                class="w-full p-2 rounded-lg bg-slate-100 border border-blue-300"
                name="planObject"
                id="planObject"
              >
                <option selected disabled value="">Wybierz obiekt...</option>
              </select>
            </div>
            <div
              class="flex flex-row justify-between items-center rounded-lg ml-2"
            >
              <div>
                Data od:
                <input
                  id="planDateStart"
                  name="planDateStart"
                  class="bg-slate-100 p-2 ml-2 rounded-lg border border-blue-300"
                  type="date"
                />
              </div>
              <div>
                Data do:
                <input
                  id="planDateEnd"
                  name="planDateEnd"
                  class="bg-slate-100 p-2 ml-2 rounded-lg border border-blue-300"
                  type="date"
                />
              </div>
            </div>
            <div class="bg-slate-100 rounded-lg">
              <select
                disabled
                class="w-full p-2 rounded-lg bg-slate-100 border border-blue-300"
                name="planJobType"
                id="planJobType"
              >
                <option selected disabled value="">
                  Wybierz rodzaj robót...
                </option>
              </select>
            </div>
            <div class="flex flex-row gap-2 items-center justify-end p-2">
              Całkowita ilość dni:
              <p id="planDaysTotal">0</p>
              (roboczych:
              <p id="planDaysWork">0)</p>
            </div>
            <div
              class="flex flex-row items-center justify-between bg-slate-50 rounded-lg ml-2"
            >
              Planowana ilość:
              <input
                id="planJobDayQuantity"
                name="planJobDayQuantity"
                class="text-right p-2 w-max rounded-lg bg-slate-100 border border-blue-300"
                value="0"
                type="text"
                maxlength="5"
                oninput="floatInputPattern(this)"
                autocomplete="off"
              />
            </div>
            <div class="flex flex-row gap-2 items-center justify-end p-2">
              Zaplanowano:
              <p id="planQuantitySum">0</p>
              /
              <p id="planQuantityTotal">0</p>
            </div>
          </div>
        </form>
        <form
          id="helpingCalcForm"
          class="basis-1/3 flex flex-col gap-2 px-2 border-2 border-blue-400 rounded-2xl"
        >
          <div
            class="flex flex-row justify-between items-center min-w-full p-2"
          >
            <div class="flex w-full justify-center">Kalkulator pomocniczy</div>
            <svg
              class="cursor-pointer fill-gray-600"
              onclick="resetHelpingCalcForm()"
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              width="24px"
              viewBox="0 -960 960 960"
            >
              <path
                d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"
              />
            </svg>
          </div>
          <div class="flex flex-row gap-2 items-center">
            <div class="w-full">
              <select
                onchange="onChangeCalcDrop1(this)"
                class="w-full p-2 rounded-lg bg-slate-100 border border-blue-300"
                name="calcDrop1"
                id="calcDrop1"
              >
                <option selected disabled value="">Wybierz z listy...</option>
                <option value="Ilość dni">Ilość dni</option>
                <option value="Ilość pracowników (dziennie)">
                  Ilość pracowników (dziennie)
                </option>
                <option value="Ilość płanowana (dziennie)">
                  Ilość płanowana (dziennie)
                </option>
              </select>
            </div>
            <div class="w-auto">
              <input
                id="calcInput1"
                class="p-2 rounded-lg text-right max-w-24 bg-slate-100 border border-blue-300"
                maxlength="5"
                oninput="calculateHelpingResult(this)"
                autocomplete="off"
              />
            </div>
          </div>
          <div class="flex flex-row justify-between gap-2 items-center">
            <div class="w-full">
              <select
                disabled
                onchange="setHelpingCategory()"
                class="w-full p-2 rounded-lg bg-slate-100 border border-blue-300"
                name="calcDrop2"
                id="calcDrop2"
              >
                <option selected disabled value="">Wybierz z listy...</option>
              </select>
            </div>
            <div class="w-auto">
              <input
                id="calcInput2"
                class="p-2 rounded-lg text-right max-w-24 bg-slate-100 border border-blue-300"
                maxlength="5"
                oninput="calculateHelpingResult(this)"
                autocomplete="off"
                disabled
              />
            </div>
          </div>
          <div class="flex flex-row gap-2 justify-between items-center">
            <div class="p-2" id="calcResultCategory"></div>
            <div class="p-2 text-right" id="calcResultValue"></div>
          </div>
        </form>
      </section>

      <!-- CHARTS -->
      <section class="flex flex-row gap-3">
        <section
          class="basis-2/3 flex flex-col gap-4 border-2 border-blue-400 rounded-2xl"
        >
          <div class="flex flex-row justify-center">
            <h2 class="py-2">Harmonogram planowy</h2>
          </div>
          <canvas id="chartJobPlan"></canvas>
          <hr />
          <canvas height="300" id="chartEmployeesPlan"></canvas>
        </section>

        <section
          class="basis-1/3 w-full flex flex-col gap-4 border-2 border-blue-400 rounded-2xl"
        >
          <div
            class="flex flex-row justify-between items-center min-w-full p-2"
          >
            <h2 class="flex w-full justify-center py-2">
              Informacje szczególne
            </h2>
            <svg
              onclick="fillInDetailPlanListForm()"
              class="cursor-pointer fill-gray-600"
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              width="24px"
              viewBox="0 -960 960 960"
            >
              <path
                d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"
              />
            </svg>
          </div>
          <form
            id="detailPlanListForm"
            oninput="onchangeDetailPlanListForm()"
            class="flex flex-col justify-center items-start px-2"
          ></form>
        </section>
      </section>
    </main>
    <script src="main.js"></script>
  </body>
</html>

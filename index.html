<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Kierownik</title>
  </head>
  <body class="bg-slate-200">
    <!-- TOAST -->
    <div class="toast" id="toast">
      <div
        class="toast-body bg-emerald-200 border border-emerald-300 rounded-lg m-4 px-6 py-4"
      >
        Message
      </div>
    </div>

    <!-- DIALOG -->

    <!-- HEADER -->
    <header class="w-full max-h-14 fixed top-0 z-50 bg-slate-300/80">
      <div
        class="container mx-auto p-3 w-full flex flex-row items-center gap-2"
      >
        <img
          src="https://ispik.pro/wp-content/uploads/2022/10/cropped-1_Primary_logo_on_transparent_1024.png"
          class="h-8 me-3"
          alt="Ispik Logo"
        />
        <ul class="flex items-center justify-between gap-5 text-gray-900 ml-40">
          <li
            class="active text-center hover:cursor-pointer hover:underline underline-offset-4"
          >
            Planowanie
          </li>
        </ul>
        <div class="flex items-center ml-auto">
          <div class="relative group flex w-full justify-center cursor-pointer">
            <p
              class="flex w-8 h-8 rounded-full bg-blue-100 border-2 border-blue-400 text-blue-950 justify-center items-center"
            >
              VV
            </p>
            <div
              class="absolute bg-blue-100 w-max top-1/2 right-8 mt-2 p-4 text-gray-700 rounded-lg shadow-lg opacity-0 group-hover:opacity-95 transition-opacity duration-300 pointer-events-none z-10"
            >
              <p class="flex justify-center text-md">Vitalii Vykhrystiuk</p>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main
      class="container mx-auto flex flex-row items-start gap-4 pt-4 pr-3 mt-14"
    >
      <aside
        id="sidebar"
        class="relative top-0 left-0 z-40 w-64 h-full bg-slate-200"
        aria-label="Sidebar"
      >
        <div class="h-full px-3 pb-4">
          <ul class="space-y-2 font-medium">
            <li
              data-section="initialPlanning"
              class="active flex items-center p-2 text-gray-900 rounded-r-xl hover:bg-slate-300 hover:cursor-pointer group"
            >
              <svg
                class="w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 -960 960 960"
                fill="currentColor"
              >
                <path
                  d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h360v80H200v560h560v-360h80v360q0 33-23.5 56.5T760-120H200Zm80-160h80v-280h-80v280Zm160 0h80v-400h-80v400Zm160 0h80v-160h-80v160Zm80-320v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80ZM480-480Z"
                />
              </svg>
              <span class="ms-3">Wstępne</span>
            </li>
            <li
              data-section="planning"
              class="flex items-center p-2 text-gray-900 rounded-r-xl hover:bg-slate-300 hover:cursor-pointer group"
            >
              <svg
                class="w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 -960 960 960"
                fill="currentColor"
              >
                <path
                  d="M120-160v-240h120v240H120Zm200-240v-200h120v200H320Zm200-200v-200h120v200H520Zm200 440v-640h120v640H720Z"
                />
              </svg>
              <span class="ms-3">Szczególowe</span>
            </li>
            <li
              data-section="planFact"
              class="flex items-center p-2 text-gray-900 rounded-r-xl hover:bg-slate-300 hover:cursor-pointer group"
            >
              <svg
                class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 -960 960 960"
                fill="currentColor"
              >
                <path
                  d="M120-120v-80l80-80v160h-80Zm160 0v-240l80-80v320h-80Zm160 0v-320l80 81v239h-80Zm160 0v-239l80-80v319h-80Zm160 0v-400l80-80v480h-80ZM120-327v-113l280-280 160 160 280-280v113L560-447 400-607 120-327Z"
                />
              </svg>
              <span class="flex-1 ms-3 whitespace-nowrap">Plan / Fakt</span>
            </li>
          </ul>
        </div>
      </aside>

      <!-- INITIAL PLANNING -->
      <section
        id="initialPlanning"
        class="section-slider w-full mb-3 flex flex-col gap-3 hidden"
      >
        <div class="w-full p-2 border-2 border-blue-400 rounded-2xl">
          <div id="initialPlanningGeneral" class="section-slider space-y-3">
            <p class="p-3">Pobieranie danych...</p>
          </div>
          <div id="initialPlanningDetail" class="section-slider hidden"></div>
        </div>
      </section>

      <!-- PLANNING -->
      <section id="planning" class="w-full mb-3 section-slider hidden">
        <section class="flex flex-row gap-3 pb-3">
          <form
            id="generalPlanInfoForm"
            class="basis-2/3 border-2 border-blue-400 rounded-2xl px-3 pb-2"
          >
            <div class="grid grid-col-2 gap-2">
              <div class="py-2 col-span-2 flex justify-center">
                <div class="relative group cursor-pointer">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    height="24px"
                    width="24px"
                    viewBox="0 -960 960 960"
                    fill="#5985E1"
                  >
                    <path
                      d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
                    />
                  </svg>
                  <div
                    id="planObjectExtraInfo"
                    class="hidden absolute bg-blue-100 top-full left-1 p-4 mt-2 w-80 text-gray-700 rounded-lg shadow-lg opacity-0 group-hover:opacity-95 transition-opacity duration-300 pointer-events-none z-10"
                  ></div>
                </div>
                <div class="flex w-full justify-center">
                  <div>Informacje ogólne</div>
                </div>
                <svg
                  class="cursor-pointer fill-gray-600"
                  onclick="resetGeneralPlanInfoForm()"
                  xmlns="http://www.w3.org/2000/svg"
                  height="24px"
                  width="24px"
                  viewBox="0 -960 960 960"
                >
                  <path
                    d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"
                  />
                </svg>
              </div>
              <div class="rounded-lg">
                <select
                  class="w-full p-2 rounded-lg bg-slate-200 border border-blue-300"
                  name="planObject"
                  id="planObject"
                >
                  <option selected disabled value="">Wybierz obiekt...</option>
                </select>
              </div>
              <div
                class="flex flex-row justify-between items-center rounded-lg ml-2"
              >
                <div>
                  Data od:
                  <input
                    id="planDateStart"
                    name="planDateStart"
                    class="bg-slate-200 p-2 ml-2 rounded-lg border border-blue-300"
                    type="date"
                  />
                </div>
                <div>
                  Data do:
                  <input
                    id="planDateEnd"
                    name="planDateEnd"
                    class="bg-slate-200 p-2 ml-2 rounded-lg border border-blue-300"
                    type="date"
                  />
                </div>
              </div>
              <div>
                <select
                  disabled
                  class="w-full p-2 rounded-lg bg-slate-200 border border-blue-300"
                  name="planJobType"
                  id="planJobType"
                >
                  <option selected disabled value="">
                    Wybierz rodzaj robót...
                  </option>
                </select>
              </div>
              <div class="flex flex-row gap-2 items-center justify-end p-2">
                Całkowita ilość dni:
                <p id="planDaysTotal">0</p>
                (roboczych:
                <p id="planDaysWork">0)</p>
              </div>
              <div
                class="flex flex-row items-center justify-between rounded-lg pl-2"
              >
                Planowana ilość:
                <input
                  id="planJobDayQuantity"
                  name="planJobDayQuantity"
                  class="text-right p-2 w-max rounded-lg bg-slate-200 border border-blue-300"
                  value="0"
                  type="text"
                  maxlength="5"
                  oninput="floatInputPattern(this)"
                  autocomplete="off"
                />
              </div>
              <div class="flex flex-row gap-2 items-center justify-end p-2">
                Zaplanowano:
                <p id="planQuantitySum">0</p>
                /
                <p id="planQuantityTotal">0</p>
              </div>
            </div>
          </form>
          <form
            id="helpingCalcForm"
            class="basis-1/3 flex flex-col gap-2 px-2 border-2 border-blue-400 rounded-2xl"
          >
            <div
              class="flex flex-row justify-between items-center min-w-full py-2"
            >
              <div class="flex w-full justify-center">
                Kalkulator pomocniczy
              </div>
              <svg
                class="cursor-pointer fill-gray-600"
                onclick="resetHelpingCalcForm()"
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                width="24px"
                viewBox="0 -960 960 960"
              >
                <path
                  d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"
                />
              </svg>
            </div>
            <div class="flex flex-row gap-2 items-center">
              <div class="w-full">
                <select
                  onchange="onChangeCalcDrop1(this)"
                  class="w-full p-2 rounded-lg bg-slate-200 border border-blue-300"
                  name="calcDrop1"
                  id="calcDrop1"
                >
                  <option selected disabled value="">Wybierz z listy...</option>
                  <option value="Ilość dni">Ilość dni</option>
                  <option value="Ilość pracowników (dziennie)">
                    Ilość pracowników (dziennie)
                  </option>
                  <option value="Ilość płanowana (dziennie)">
                    Ilość płanowana (dziennie)
                  </option>
                </select>
              </div>
              <div class="w-auto">
                <input
                  id="calcInput1"
                  class="p-2 rounded-lg text-right max-w-24 bg-slate-200 border border-blue-300"
                  maxlength="5"
                  oninput="calculateHelpingResult(this)"
                  autocomplete="off"
                />
              </div>
            </div>
            <div class="flex flex-row justify-between gap-2 items-center">
              <div class="w-full">
                <select
                  disabled
                  onchange="setHelpingCategory()"
                  class="w-full p-2 rounded-lg bg-slate-200 border border-blue-300"
                  name="calcDrop2"
                  id="calcDrop2"
                >
                  <option selected disabled value="">Wybierz z listy...</option>
                </select>
              </div>
              <div class="w-auto">
                <input
                  id="calcInput2"
                  class="p-2 rounded-lg text-right max-w-24 bg-slate-200 border border-blue-300"
                  maxlength="5"
                  oninput="calculateHelpingResult(this)"
                  autocomplete="off"
                  disabled
                />
              </div>
            </div>
            <div class="flex flex-row gap-2 justify-between items-center">
              <div class="p-2" id="calcResultCategory"></div>
              <div class="p-2 text-right" id="calcResultValue"></div>
            </div>
          </form>
        </section>

        <!-- CHARTS -->
        <section class="flex flex-row gap-3">
          <section
            class="basis-2/3 flex flex-col gap-4 border-2 border-blue-400 rounded-2xl"
          >
            <div class="flex flex-row justify-center">
              <h2 class="py-2">Harmonogram planowy</h2>
            </div>
            <canvas id="chartJobPlan"></canvas>
            <hr />
            <canvas id="chartEmployeesPlan"></canvas>
          </section>

          <section
            class="basis-1/3 w-full flex flex-col gap-4 border-2 border-blue-400 rounded-2xl"
          >
            <div
              class="flex flex-row justify-between items-center min-w-full p-2"
            >
              <h2 class="flex w-full justify-center py-2">
                Informacje szczególne
              </h2>
              <svg
                onclick="fillInDetailPlanListForm()"
                class="cursor-pointer fill-gray-600"
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                width="24px"
                viewBox="0 -960 960 960"
              >
                <path
                  d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"
                />
              </svg>
            </div>
            <form
              id="detailPlanListForm"
              oninput="onchangeDetailPlanListForm()"
              class="flex flex-col justify-center items-start px-2"
            ></form>
          </section>
        </section>
      </section>

      <!-- PLANFACT -->
      <section
        id="planFact"
        class="w-full mb-3 section-slider flex flex-col gap-3 hidden"
      >
        <form
          id="generalPlanFactInfoForm"
          class="border-2 border-blue-400 rounded-2xl px-3 pb-2"
        >
          <div class="flex flex-col">
            <div class="py-2 col-span-3 flex justify-center">
              <div
                class="relative group flex w-full justify-center cursor-pointer"
              >
                <p>Informacje ogólne</p>
              </div>
              <svg
                class="cursor-pointer fill-gray-600"
                onclick="resetGeneralPlanFactInfoForm()"
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                width="24px"
                viewBox="0 -960 960 960"
              >
                <path
                  d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"
                />
              </svg>
            </div>
            <div class="flex flex-row items-center justify-between gap-3">
              <div class="w-1/3">
                <select
                  class="w-full p-2 rounded-lg bg-slate-200 border border-blue-300"
                  name="planFactObject"
                  id="planFactObject"
                >
                  <option selected disabled value="">Wybierz obiekt...</option>
                </select>
              </div>
              <div class="w-1/3">
                <select
                  disabled
                  class="w-full p-2 rounded-lg bg-slate-200 border border-blue-300"
                  name="planFactJobType"
                  id="planFactJobType"
                >
                  <option selected disabled value="">
                    Wybierz rodzaj robót...
                  </option>
                </select>
              </div>
              <div class="w-1/3 flex justify-between">
                <div class="w-full flex justify-end">
                  <span>Ilość:</span>
                  <span class="px-3" id="planFactQuantityTotal">0</span>
                </div>
                <div class="relative group cursor-pointer px-4">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    height="24px"
                    width="24px"
                    viewBox="0 -960 960 960"
                    fill="#5985E1"
                  >
                    <path
                      d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
                    />
                  </svg>
                  <div
                    id="planFactObjectExtraInfo"
                    class="absolute bg-blue-100 top-full right-1 mt-2 w-80 p-4 text-gray-700 rounded-lg shadow-lg opacity-0 group-hover:opacity-95 transition-opacity duration-300 pointer-events-none z-10 hidden"
                  ></div>
                </div>
              </div>
            </div>
          </div>
        </form>

        <!-- PLANFACT CHARTS -->
        <section
          class="basis-2/3 flex flex-col gap-4 border-2 border-blue-400 rounded-2xl"
        >
          <div class="flex flex-row justify-center">
            <h2 class="py-2">Harmonogram plan/fakt</h2>
          </div>
          <canvas height="100" id="chartJobPlanFact"></canvas>
          <hr />
          <canvas height="100" id="chartEmployeesPlanFact"></canvas>
        </section>
      </section>
    </main>

    <!-- LOADER -->
    <div class="loader flex justify-center items-center hidden">
      <div
        class="flex flex-row justify-center items-center gap-4"
        role="status"
      >
        <svg
          class="animate-spin w-8 h-8"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 -960 960 960"
          fill="currentColor"
        >
          <path
            d="M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-155.5t86-127Q252-817 325-848.5T480-880q17 0 28.5 11.5T520-840q0 17-11.5 28.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160q133 0 226.5-93.5T800-480q0-17 11.5-28.5T840-520q17 0 28.5 11.5T880-480q0 82-31.5 155t-86 127.5q-54.5 54.5-127 86T480-80Z"
          />
        </svg>
        <span>Loading...</span>
      </div>
    </div>

    <!-- MODAL -->
    <div class="customModal flex justify-center items-center hidden">
      <div class="bg-slate-100 rounded-lg shadow-lg w-96 p-6 relative">
        <button
          onclick="closeCustomModal()"
          class="absolute top-2 right-2 w-8 h-8 flex items-center justify-center rounded-sm text-2xl text-gray-600 duration-500 hover:bg-slate-300"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 -960 960 960"
            fill="currentColor"
          >
            <path
              d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"
            />
          </svg>
        </button>
        <h2 class="text-lg text-gray-800 font-bold mb-4">Custom Dialog</h2>
        <p class="text-gray-600 mb-6">
          This is a custom dialog box styled with Tailwind CSS. You can add your
          own content here.
        </p>
      </div>
    </div>

    <script src="main.js"></script>
  </body>
</html>
